# 作业与积分小程序 需求文档

## 1. 项目概述

本小程序是一个面向小学生的作业与积分管理工具，旨在通过简洁有趣的界面和激励机制，帮助学生培养良好的学习习惯和时间管理能力。系统采用前后端分离架构，前端使用 HTML、JavaScript 和 Tailwind CSS 构建，后端使用 Python Flask 框架和 SQLite 数据库。

## 2. 目标与背景

### 2.1 目标用户

- 小学生（主要用户）
- 家长或老师（协助配置和监督）

### 2.2 产品目标

通过简洁有趣的打卡界面和番茄钟机制，培养孩子的时间管理习惯，记录每日任务完成情况，并通过积分激励机制增强学习动力。

### 2.3 非功能要求

- 界面友好、低学习成本，设计风格能够吸引小学生使用
- 支持离线使用（PWA 功能）
- 响应式设计，支持在平板或小屏浏览器访问
- 数据安全性和用户隐私保护

## 3. 系统架构

### 3.1 前端架构

- 技术栈：HTML、JavaScript、Tailwind CSS
- 页面结构：采用底部导航栏设计，包含三个主要界面
  - 作业打卡
  - 小心愿
  - 我的

### 3.2 后端架构

- 技术栈：Python Flask、SQLite 数据库
- API 设计：RESTful API
- 数据存储：用户数据、任务数据、积分数据、心愿数据等

## 4. 功能模块

### 4.1 用户管理系统

#### 4.1.1 注册登录功能

- 支持账号注册与登录
- 首次注册的账号为主账号，作为管理员

#### 4.1.2 子账号管理

- 管理员可创建和管理子账号
- 每个子账号数据独立存储

#### 4.1.3 权限管理

- 管理员可设置子账号操作权限
- 权限包括查看、添加、编辑、删除等操作
- 只有拥有相应权限的用户才能执行对应操作

#### 4.1.4 密码管理

- 支持设置和修改密码
- 用户未设置密码时，所有需要验证密码的操作可直接进行

### 4.2 作业打卡界面

#### 4.2.1 数据统计展示

- 顶部显示一行数据统计：“日时长”、“任务数”、“日金币”、“完成率”、“总金币”
- “日金币”，统计每日获得的金币数
- 金币数可设置为负数，表示惩罚

#### 4.2.2 日期选择与周视图

- 显示当前周信息（如“2025 年 10 月第 41 周”）
- 支持通过左右箭头切换周视图
- 支持点击“本周”快速返回当前周
- 每周从周一开始显示
- 点击任意日期可切换到该日期的任务计划页面

#### 4.2.3 任务列表展示

- 按学科分类展示任务
- 提供“全部学科”、“语文”、“数学”等筛选选项
- 每个任务显示计划时长和奖励金币

#### 4.2.4 任务卡片

- 显示任务名称、描述、计划时长、实际耗时
- 显示任务状态（已完成、待完成、未完成）
- 提供操作菜单：编辑、删除、番茄钟
- 点击任务卡片可展开/折叠更多详情

#### 4.2.5 番茄钟功能

- 点击任务卡片菜单中的“番茄钟”按钮弹出番茄钟窗口
- 番茄钟时间默认为任务的计划时间
- 提供开始、重置、完成按钮
- 点击开始后，番茄钟可缩小为浅绿色透明小球显示倒计时
- 完成后任务自动标记为已完成，更新实际完成时间

#### 4.2.6 金币管理

- 单击金币图标可修改金币数量
- 修改时需输入密码验证（管理员才可以有此操作，儿童用户无法操作）
- 修改需给出原因并记录到操作日志

### 4.3 小心愿界面

#### 4.3.1 心愿展示

- 显示可用金币数量
- 展示默认内置的 6 个小心愿：“看电视”、“零花钱”、“玩平板”、“玩手机”、“玩游戏”、“自由活动”
- 所有用户（包括管理员）都能看到这些内置心愿

#### 4.3.2 心愿属性

- 心愿图标：支持选择内置图片或自定义上传
- 心愿名称
- 心愿内容描述
- 兑换所需金币
- 兑换礼物的单位（如分钟、元、个等）
- 已兑换次数显示

#### 4.3.3 心愿管理

- 支持用户自定义添加新的心愿
- 支持编辑和删除自定义心愿

#### 4.3.4 兑换功能

- 支持用金币兑换心愿
- 兑换成功后更新金币数量和兑换次数
- 兑换记录保存并可查看

#### 4.3.5 领取记录

- “可用金币”同一行最右侧提供“领取记录”按钮
- 点击可查看小心愿兑换相关记录

### 4.4 我的界面

#### 4.4.1 个人信息

- 显示当前用户名
- 显示总番茄个数
- 显示总金币数

#### 4.4.2 荣誉系统

- 按月显示获得的荣誉
- 提供 20 种荣誉种类，如“连续打卡 7 天”、“学习达人”、“阅读之星”等
- 显示荣誉获得次数
- 未获得的荣誉灰色显示

#### 4.4.3 数据管理

- 数据导出功能：导出用户所有数据，包含金币、小心愿相关设置等
- 数据清除功能：清除用户所有数据，包含金币、示例数据等
- 操作记录查看：显示用户近一个月的操作历史

#### 4.4.4 操作记录

- 记录添加/删除/编辑任务、学科、用户等操作
- 记录番茄钟操作
- 记录心愿兑换操作
- 记录金币修改操作
- 记录数据清除操作
- 操作记录保存近一个月，过期自动删除

### 4.5 任务管理

#### 4.5.1 任务属性

- 任务编号（系统自动生成）
- 任务图标（默认提供，支持选择或自定义上传）
- 任务名称
- 任务描述
- 任务积分（可为负数，表示惩罚）
- 任务分类（支持内置或自定义分类）
- 重复设置（无、每天、每 N 天、每周选择特定日期、时间段）
- 结束重复设置（无、指定结束日期）
- 任务状态（已完成、待定、未完成）
- 备注信息
- 计划时长（默认 10 分钟）
- 实际耗时
- seriesId（循环任务系列 ID）

#### 4.5.2 任务添加与编辑

- 支持一次性任务和循环任务
- 一次性任务：只能设置开始日期，可选择历史日期进行补打卡
- 循环任务：必须设置开始日期，可选设置结束日期
- 添加任务时默认计划时长为 10 分钟，默认奖励金币为 1 金币
- 编辑循环任务时，可选择“只更新未来实例”或“更新历史+未来所有实例”

#### 4.5.3 任务删除

- 删除前提供确认提示
- 支持删除单个任务或整个任务系列

#### 4.5.4 任务有效期

- 超过结束日期的任务自动隐藏
- 未到开始日期的任务不显示
- 可通过日历查看历史任务

### 4.6 任务分类系统

#### 4.6.1 内置分类

- 语文、数学、英语、劳动、生活、兴趣、表扬、批评、独立、惩罚

#### 4.6.2 自定义分类

- 支持用户根据需要创建新的任务分类
- 支持设置分类的主题颜色
- 支持删除自定义分类

## 5. 数据模型

### 5.1 用户表

- 用户 ID
- 用户名
- 密码（加密存储）
- 角色（管理员/普通用户）
- 权限设置
- 总金币数
- 总番茄数

### 5.2 任务表

- 任务 ID
- 用户 ID
- seriesId（循环任务系列 ID）
- 任务名称
- 任务描述
- 任务图标
- 任务分类
- 计划时长
- 实际耗时
- 任务积分
- 重复设置
- 开始日期
- 结束日期
- 任务状态
- 创建时间
- 更新时间
- 备注

### 5.3 任务分类表

- 分类 ID
- 用户 ID
- 分类名称
- 分类颜色
- 是否内置

### 5.4 心愿表

- 心愿 ID
- 用户 ID
- 心愿名称
- 心愿内容
- 心愿图标
- 兑换所需金币
- 兑换单位
- 已兑换次数
- 是否内置

### 5.5 操作记录表

- 记录 ID
- 用户 ID
- 操作类型
- 操作内容
- 操作时间
- 操作结果

### 5.6 荣誉表

- 荣誉 ID
- 荣誉名称
- 荣誉描述
- 触发条件

### 5.7 用户荣誉表

- 记录 ID
- 用户 ID
- 荣誉 ID
- 获得时间
- 获得次数

## 6. 界面设计

### 6.1 设计风格

- 整体采用绿色作为主题色
- 卡片式布局，简洁明了
- 图标和 UI 元素设计符合小学生审美
- 界面布局紧凑

### 6.2 底部导航栏

- 包含三个主要入口：“作业打卡”、“小心愿”、“我的”
- 当前页面导航项高亮显示

### 6.3 交互动效

- 浮动添加按钮动画效果
- 任务卡片展开/折叠动画
- 番茄钟状态切换动画
- 金币数量变化动画

## 7. 安全与性能

### 7.1 数据安全

- 用户密码加密存储
- 敏感操作需密码验证
- 数据定期备份

### 7.2 性能优化

- 支持离线使用（PWA）
- 前端数据缓存
- 页面懒加载
